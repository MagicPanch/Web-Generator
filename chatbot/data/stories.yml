version: "3.1"

stories:

# INICIO

## HACE TUTORIAL

- story: Usuario nuevo o existente hace tutorial
  steps:
    - intent: start
    - action: action_saludo_telegram
    - slot_was_set:
      - pregunta_tutorial: true
    - intent: afirmar
    - action: action_capturar_tutorial
    - slot_was_set:
      - inicia_tutorial: true
    - checkpoint: pregunta_1_tutorial

## NO HACE TUTORIAL

- story: Usuario nuevo o existente no hace tutorial
  steps:
    - intent: start
    - action: action_saludo_telegram
    - slot_was_set:
      - pregunta_tutorial: true
    - intent: denegar
    - action: action_capturar_tutorial

## YA HIZO TUTORIAL

- story: Usuario existente ya hizo tutorial
  steps:
    - intent: start
    - action: action_saludo_telegram
    - slot_was_set:
      - pregunta_tutorial: false

# TUTORIAL

## PEDIR TUTORIAL

- story: pedir tutorial
  steps:
  - intent: pedir_tutorial
  - action: action_capturar_tutorial
  - slot_was_set:
    - inicia_tutorial: true
  - checkpoint: pregunta_1_tutorial

## INICIAR TUTORIAL

### PREGUNTA 1

- story: Entiende 1
  steps:
  - checkpoint: pregunta_1_tutorial
  - slot_was_set:
    - inicia_tutorial: true
  - action: action_pregunta_1
  - slot_was_set:
    - pregunta_1_confirmacion: true
  - intent: afirmar
  - checkpoint: pregunta_1_entendida

- story: No entiende 1
  steps:
  - checkpoint: pregunta_1_tutorial
  - slot_was_set:
    - inicia_tutorial: true
  - action: action_pregunta_1
  - slot_was_set:
    - pregunta_1_confirmacion: true
  - intent: denegar
  - action: action_pregunta_1_repetir
  - slot_was_set:
    - pregunta_1_repetir_confirmacion: true
  - intent: afirmar
  - checkpoint: pregunta_1_entendida

### PREGUNTA 2

- story: Entiende 2
  steps:
  - checkpoint: pregunta_1_entendida
  - action: action_pregunta_2
  - slot_was_set:
    - pregunta_2_confirmacion: true
  - intent: afirmar
  - checkpoint: pregunta_2_entendida

- story: No entiende 2
  steps:
  - checkpoint: pregunta_1_entendida
  - action: action_pregunta_2
  - slot_was_set:
    - pregunta_2_confirmacion: true
  - intent: denegar
  - action: action_pregunta_2_repetir
  - slot_was_set:
    - pregunta_2_repetir_confirmacion: true
  - intent: afirmar
  - checkpoint: pregunta_2_entendida

## TERMINAR TUTORIAL

- story: terminar tutorial
  steps:
  - checkpoint: pregunta_2_entendida
  - action: action_terminar_tutorial

# CREACION

- story: crear pagina
  steps:
  - intent: crear_algo
  - action: action_capturar_creacion

- story: crear sin tutorial (si)
  steps:
  - intent: crear_algo
  - action: action_capturar_creacion
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: afirmar
  - action: action_capturar_tutorial
  - slot_was_set:
    - inicia_tutorial: true
  - checkpoint: pregunta_1_tutorial

- story: crear pagina sin tutorial (no)
  steps:
  - intent: crear_algo
  - action: action_capturar_creacion
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: denegar
  - action: action_capturar_tutorial

## PAGINA

- story: crear pagina correcto
  steps:
  - slot_was_set:
      - creando_pagina: true
  - intent: nombre_pagina
  - action: action_crear_pagina  #Aca se crea el proyecto y se guarda la pagina en la DB. Posteriormente se ejecuta en modo DEV
  - slot_was_set:
      - creando_pagina: false
  - action: action_ejecutar_dev
  - slot_was_set:
      - running_dev: true

- story: crear pagina conflicto nombre
  steps:
  - slot_was_set:
      - creando_pagina: true
  - intent: nombre_pagina
  - action: action_crear_pagina  #Aca se detecta el conflicto con el nombre y se le repregunta al usuario
  - slot_was_set:
      - creando_pagina: true
      - pregunta_nombre: true
  - intent: nombre_pagina
  - action: action_crear_pagina  #Aca se crea el proyecto y se guarda la pagina en la DB. Posteriormente se ejecuta en modo DEV
  - slot_was_set:
      - creando_pagina: false
  - action: action_ejecutar_dev
  - slot_was_set:
      - running_dev: true

## SECCION

- story: crear seccion sin pagina
  steps:
    - slot_was_set:
      - creando_seccion: true
    - action: action_capturar_tipo_seccion
    - slot_was_set:
      - componente: seccion
      - pregunta_nombre: true
    - intent: nombre_pagina
    - action: action_capturar_tipo_seccion

- story: crear seccion con tipo y pagina
  steps:
  - slot_was_set:
    - creando_seccion: true
  - action: action_capturar_tipo_seccion
  - checkpoint: crear_seccion

- story: crear seccion sin tipo y pagina
  steps:
  - slot_was_set:
    - creando_seccion: true
  - action: action_capturar_tipo_seccion
  - slot_was_set:
    - componente: seccion
    - pregunta_seccion: true
  - intent: tipo_seccion
  - action: action_capturar_tipo_seccion

### INFORMATIVA

- story: crear seccion informativa 1
  steps:
  - checkpoint: crear_seccion
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
  - or:
    - intent: decir_nombre_informativa
    - intent: despues_te_digo
  - action: action_crear_informativa_2
  - checkpoint: crear_informativa_1

- story: crear seccion informativa 2
  steps:
  - checkpoint: crear_informativa_1
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pide_text_informativa: true
  - intent: decir_texto_informativa
  - action: action_crear_informativa_3
  - checkpoint: crear_informativa_2

- story: crear seccion informativa 3 (envia imagen)
  steps:
  - checkpoint: crear_informativa_2
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pide_img_informativa: true
  - intent: enviar_imagen
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - checkpoint: crear_informativa_3.1

- story: crear seccion informativa 3 (envia otra imagen)
  steps:
  - checkpoint: crear_informativa_3.1
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - intent: enviar_imagen
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - checkpoint: crear_informativa_3.1

- story: crear seccion informativa 3 (no envia otra imagen)
  steps:
  - checkpoint: crear_informativa_3.1
  - slot_was_set:
    - componente: seccion
  - slot_was_set:
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - intent: denegar
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: false
  - action: action_crear_informativa_4
  - slot_was_set:
    - creando_seccion_informativa: false

- story: crear seccion informativa 3 (no envia imagen)
  steps:
  - checkpoint: crear_informativa_2
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pide_img_informativa: true
  - intent: denegar
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - creando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: false
  - action: action_crear_informativa_4
  - slot_was_set:
    - creando_seccion_informativa: false

# EDICION

- story: editar con pagina y componente
  steps:
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - checkpoint: componente_capturado

- story: editar con pagina y sin componente
  steps:
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - slot_was_set:
    - pregunta_componente: true
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - checkpoint: componente_capturado

- story: editar sin pagina y con componente
  steps:
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - slot_was_set:
    - pregunta_nombre: true
  - intent: nombre_pagina
  - action: action_capturar_edicion
  - checkpoint: componente_capturado

- story: editar sin pagina ni componente
  steps:
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - slot_was_set:
    - pregunta_edicion: true
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - checkpoint: componente_capturado

- story: editar con pagina y componente pero sin seccion
  steps:
  - intent: modificar_pagina
  - action: action_capturar_edicion
  - checkpoint: componente_capturado
  - slot_was_set:
    - pregunta_seccion: true
  - intent: tipo_seccion
  - action: action_capturar_edicion
  - checkpoint: componente_capturado

- story: editar pagina sin tutorial (si)
  steps:
    - intent: modificar_pagina
    - action: action_capturar_edicion
    - slot_was_set:
        - pregunta_tutorial: true
    - intent: afirmar
    - action: action_capturar_tutorial
    - slot_was_set:
        - inicia_tutorial: true
    - checkpoint: pregunta_1_tutorial

- story: editar pagina sin tutorial (no)
  steps:
    - intent: modificar_pagina
    - action: action_capturar_edicion
    - slot_was_set:
        - pregunta_tutorial: true
    - intent: denegar
    - action: action_capturar_tutorial

## ENCABEZADO

- story: editar encabezado 1
  steps:
  - checkpoint: componente_capturado
  - slot_was_set:
    - componente: encabezado
    - creando_encabezado: true
    - pregunta_color: true
  - or:
    - intent: decir_color
    - intent: despues_te_digo
  - action: action_guardar_color
  - checkpoint: color_encabezado

- story: editar encabezado 2
  steps:
  - checkpoint: color_encabezado
  - slot_was_set:
    - componente: encabezado
    - creando_encabezado: true
  - action: utter_preguntar_logo
  - or:
    - intent: enviar_imagen
    - intent: denegar
  - slot_was_set:
    - componente: encabezado
    - creando_encabezado: true
  - action: action_recibir_imagen
  - action: action_crear_encabezado
  - slot_was_set:
    - creando_encabezado: false

## FOOTER

- story: editar footer 1
  steps:
  - checkpoint: componente_capturado
  - slot_was_set:
    - componente: footer
    - creando_footer: true
  - or:
    - intent: decir_mail
    - intent: denegar
  - action: action_guardar_mail_footer
  - checkpoint: mail_footer

- story: editar footer 2
  steps:
  - checkpoint: mail_footer
  - slot_was_set:
    - componente: footer
    - creando_footer: true
  - action: utter_preguntar_ubicacion
  - or:
    - intent: decir_ubicacion
    - intent: denegar
  - slot_was_set:
    - componente: footer
    - creando_footer: true
  - action: action_guardar_ubicacion_footer
  - slot_was_set:
    - creando_footer: false

## SECCIÓN

### INFORMATIVA

- story: modificar seccion informativa 1
  steps:
  - checkpoint: componente_capturado
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
  - or:
    - intent: decir_nombre_informativa
    - intent: denegar
  - action: action_modificar_informativa_2
  - checkpoint: editar_informativa_1

- story: modificar seccion informativa 2
  steps:
  - checkpoint: editar_informativa_1
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pide_text_informativa: true
  - or:
    - intent: decir_texto_informativa
    - intent: denegar
  - action: action_modificar_informativa_3
  - checkpoint: editar_informativa_2

- story: modificar seccion informativa 3 (envia imagen)
  steps:
  - checkpoint: editar_informativa_2
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
  - intent: enviar_imagen
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - checkpoint: editar_informativa_3.1

- story: modificar seccion informativa 3 (envia otra imagen)
  steps:
  - checkpoint: editar_informativa_3.1
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - intent: enviar_imagen
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - checkpoint: editar_informativa_3.1

- story: modificar seccion informativa 3 (no envia otra imagen)
  steps:
  - checkpoint: editar_informativa_3.1
  - slot_was_set:
    - componente: seccion
  - slot_was_set:
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: true
  - intent: denegar
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: false
  - action: action_modificar_informativa_4
  - slot_was_set:
    - editando_seccion_informativa: false

- story: modificar seccion informativa 3 (no envia imagen)
  steps:
  - checkpoint: editar_informativa_2
  - slot_was_set:
    - componente: seccion
  - slot_was_set:
    - editando_seccion_informativa: true
  - intent: denegar
  - action: action_recibir_imagen
  - slot_was_set:
    - componente: seccion
    - editando_seccion_informativa: true
    - pregunta_otra_imagen_seccion_informativa: false
  - action: action_modificar_informativa_4
  - slot_was_set:
    - editando_seccion_informativa: false

### E-COMMERCE

### ABM

# ADMINISTRAR PAGINAS

## MODIFICAR

#########POTENCIALMENTE PARA BORRAR

#- story: modificar pagina dando nombre
#  steps:
#  - intent: modificar_pagina
#  - action: action_modificar_pagina

#- story: modificar pagina sin nombre
#  steps:
#  - intent: modificar_pagina
#  - action: action_modificar_pagina
#  - slot_was_set:
#    - pregunta_modificacion: true
#  - intent: nombre_pagina
#  - action: action_modificar_pagina

## EJECUTAR

- story: ejecutar pagina dando nombre
  steps:
  - intent: ejecutar_pagina
  - action: action_ejecutar_pagina

- story: ejecutar pagina sin nombre
  steps:
  - intent: ejecutar_pagina
  - action: action_ejecutar_pagina
  - slot_was_set:
    - pregunta_ejecucion: true
  - intent: nombre_pagina
  - action: action_ejecutar_pagina

- story: ejecutar pagina sin tutorial (si)
  steps:
  - intent: ejecutar_pagina
  - action: action_ejecutar_pagina
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: afirmar
  - action: action_capturar_tutorial
  - slot_was_set:
      - inicia_tutorial: true
  - checkpoint: pregunta_1_tutorial

- story: editar pagina sin tutorial (no)
  steps:
  - intent: ejecutar_pagina
  - action: action_ejecutar_pagina
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: denegar
  - action: action_capturar_tutorial

# DETENER

- story: detener pagina dando nombre
  steps:
  - intent: detener_pagina
  - action: action_detener_pagina

- story: detener pagina sin nombre
  steps:
  - intent: detener_pagina
  - action: action_detener_pagina
  - slot_was_set:
    - pregunta_detencion: true
  - intent: nombre_pagina
  - action: action_detener_pagina

- story: detener pagina sin tutorial (si)
  steps:
  - intent: detener_pagina
  - action: action_detener_pagina
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: afirmar
  - action: action_capturar_tutorial
  - slot_was_set:
      - inicia_tutorial: true
  - checkpoint: pregunta_1_tutorial

- story: detener pagina sin tutorial (no)
  steps:
  - intent: detener_pagina
  - action: action_detener_pagina
  - slot_was_set:
      - pregunta_tutorial: true
  - intent: denegar
  - action: action_capturar_tutorial

## CONVERSACION

- story: Decir funcionalidad
  steps:
    - intent: funcionalidad
    - action: utter_funcionalidad

- story: Comienzo de charla
  steps:
  - intent: saludo
  - action: action_saludo_telegram #Aca se guarda al usuario en la DB

- story: Como estas
  steps:
  - intent: como_estas
  - action: utter_como_estas

- story: Finalizacion de charla
  steps:
  - intent: despedidasc
  - action: action_despedida_telegram

#Stories randoms
- story: Contestar risa
  steps:
  - intent: reirse
  - action: utter_reirse

- story: Estado de animo triste
  steps:
  - intent: estado_de_animo_triste
  - action: action_animo

- story: Estado de animo feliz
  steps:
  - intent: estado_de_animo_feliz
  - action: action_animo

- story: Agradecer
  steps:
  - intent: me_alegro
  - action: utter_me_alegro

- story: Decir nombre
  steps:
  - intent: decir_nombre
  - action: utter_decir_nombre

